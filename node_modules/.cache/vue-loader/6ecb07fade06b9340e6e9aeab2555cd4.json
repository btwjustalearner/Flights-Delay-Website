{"remainingRequest":"/Users/huangyan/Documents/GitHub/a5-null/travelwebsite/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/huangyan/Documents/GitHub/a5-null/travelwebsite/src/components/BarChart.vue?vue&type=style&index=0&id=22e0623b&scoped=true&lang=css&","dependencies":[{"path":"/Users/huangyan/Documents/GitHub/a5-null/travelwebsite/src/components/BarChart.vue","mtime":1574896840000},{"path":"/Users/huangyan/Documents/GitHub/a5-null/travelwebsite/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/huangyan/Documents/GitHub/a5-null/travelwebsite/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/huangyan/Documents/GitHub/a5-null/travelwebsite/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/huangyan/Documents/GitHub/a5-null/travelwebsite/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/huangyan/Documents/GitHub/a5-null/travelwebsite/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmFjOmhvdmVyewogICAgb3BhY2l0eToxOwp9Cg=="},{"version":3,"sources":["BarChart.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoIA;AACA;AACA","file":"BarChart.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <div id=\"barchart\">\n        <svg id=\"chart\" height=800 width=1500></svg>\n    </div>\n</template>\n\n<script>\n    import * as d3 from 'd3';\n    export default {\n        name: \"BarChart\",\n        mounted(){\n            function removeZeroValue(arr){\n                var newArr=[];\n                arr.forEach(\n                    function(e){\n                        if (e['ARR_DELAY']>0){\n                            newArr.push(e)\n                        }\n                    }\n                );\n                return newArr;\n            }\n            function groupBy( array , f ) {\n                let groups = {};\n                array.forEach( function( o ) {\n                    let group = JSON.stringify( f(o) );\n                    groups[group] = groups[group] || [];\n                    groups[group].push( o );\n                });\n                return Object.keys(groups).map( function( group ) {\n                    return groups[group];\n                });\n            }\n            d3.csv('data/Flights.csv',function(d){\n                return {\n                    DEST_AIRPORT_ID:+d.DEST_AIRPORT_ID,\n                    ARR_DELAY:+d.ARR_DELAY\n                };\n            }).then(\n                function(data){\n                    var dataProcessed=removeZeroValue(data);\n                    var sorted = groupBy(dataProcessed, function(item){\n                        return [item.DEST_AIRPORT_ID];\n                    });\n                    var count=0.0;\n                    var dataGroup=new Array()\n                    var dic=new Array()\n                    sorted.forEach(\n                        function(e){\n                            count=0\n                            e.forEach(\n                                function(m){\n                                    count=count+m['ARR_DELAY'];\n                                }\n                            )\n                            dic=[]\n                            dic['DEST_AIRPORT_ID']=e[0]['DEST_AIRPORT_ID']\n                            dic['Count']=count\n                            dataGroup.push(dic)\n                        }\n                    )\n\n\n\n\n                    var xScale = d3.scaleBand()\n                        .round(true)\n                        .paddingInner(0.05);\n\n                    xScale.domain(dataGroup.map(function (d) {\n                        return d.DEST_AIRPORT_ID;\n                    }))\n                        .range([0, 1500]);\n                    var height=700;\n                    var yScale = d3.scaleLinear();\n                    var maxnum=0\n                    var minnum=10000000\n                    for (var i=0;i<dataGroup.length;i++){\n                        if (dataGroup[i]['Count']>maxnum){\n                            maxnum=dataGroup[i]['Count']\n                        }\n                        if (dataGroup[i]['Count']<minnum){\n                            minnum=dataGroup[i]['Count']\n                        }\n                    }\n\n                    yScale.domain([minnum,maxnum])\n                        .range([100,height]);\n                    dataGroup.forEach(function(e){\n                        console.log(yScale(e.Count))\n                    })\n\n\n\n\n\n                    var yAxis = d3.axisLeft()\n                        .scale(yScale);\n                    d3.select(\"#chart\").append('g')\n                        .attr('class', 'y axis')\n                        .attr('transform', 'translate(70,' +50  + ')')\n                        .call(yAxis);\n\n\n                    var xAxis = d3.axisBottom()\n                        .scale(xScale);\n\n                    d3.select(\"#chart\").append('g')\n                        .attr('class', 'x axis')\n                        .attr('transform', 'translate(0,' +height  + ')')\n                        .call(xAxis);\n\n                    d3.select(\"#chart\")\n                        .selectAll(\"div\")\n                        .data(dataGroup)\n                        .enter()\n                        .append('rect')\n                        .attr('x',function(d){return xScale(d.DEST_AIRPORT_ID)})\n                        .attr('y',function(d){return height-yScale(d.Count)})\n                        .attr('height',function(d){return yScale(d.Count)})\n                        .attr('width',1)\n                        .style(\"fill\",\"lightpink\");\n\n\n\n                }\n            )\n        }\n    }\n</script>\n\n<style scoped>\n    .ac:hover{\n        opacity:1;\n    }\n</style>"]}]}